# B站数据分析项目 - 使用说明

## 🎯 项目说明

这是一个完整的B站热门视频数据分析项目，**即使无法访问B站API，也能通过模拟数据完成所有功能**。

## ✨ 核心特性

- ✅ **智能数据获取**: 优先使用真实API，失败时自动切换到模拟数据
- ✅ **完整可视化**: 10个专业图表（5个二维 + 5个三维）
- ✅ **一键运行**: 双击bat文件即可完成所有操作
- ✅ **中文支持**: 完美解决Windows编码问题

## 🚀 快速开始（3步）

### 步骤1: 进入项目目录

```bash
cd e:\anstis\Phase4_Training\Bilibili_Analysis
```

### 步骤2: 一键运行

```bash
# 双击运行（推荐）
run_all.bat

# 或命令行运行
run_all.bat
```

### 步骤3: 查看结果

- 数据文件: `data/` 目录
- 图表文件: `visualizations/` 目录

## 📊 生成的文件

### 数据文件（3个）

```
data/
├── bilibili_data.csv      # CSV格式数据（可用Excel打开）
├── bilibili_data.json     # JSON格式数据
└── bilibili_report.txt    # 数据分析报告
```

### 可视化图表（10个）

```
visualizations/
├── 01_播放量分析.png      # 播放量分布、Top 20、占比
├── 02_互动数据分析.png    # 点赞、投币、收藏分析
├── 03_UP主分析.png        # UP主排行和分布
├── 04_分区雷达图.png      # 各分区多维度对比
├── 05_综合仪表盘.png      # 综合数据展示
├── 06_三维散点图.png      # 播放-点赞-投币三维分布
├── 07_三维柱状图.png      # 分区数据三维对比
├── 08_三维曲面图.png      # 数据关系曲面
├── 09_三维线框图.png      # 数据分布密度
└── 10_三维综合展示.png    # 多角度三维展示
```

## 🔧 分步运行（可选）

如果想分步执行，可以：

```bash
# 1. 爬取数据
python crawler.py

# 2. 生成二维图表
python visualize_2d.py

# 3. 生成三维图表
python visualize_3d.py
```

## 💡 数据模式说明

### 模式1: 真实数据（优先）

- 从B站官方API获取真实排行榜数据
- 包含5个分区：全站、动画、音乐、游戏、娱乐
- 每个分区约20个视频

### 模式2: 模拟数据（备用）

当API无法访问时，自动切换到模拟数据：
- 生成100条模拟视频数据
- 数据符合真实分布规律
- 包含所有必要字段
- **确保可视化功能正常运行**

## 📈 数据字段说明

| 字段 | 说明 | 示例 |
|------|------|------|
| BV号 | 视频唯一标识 | BV1xx411c7mD |
| 标题 | 视频标题 | 这游戏太离谱了！ |
| UP主 | 视频作者 | 老番茄 |
| 播放量 | 播放次数 | 1,234,567 |
| 点赞数 | 点赞次数 | 98,765 |
| 投币数 | 投币次数 | 45,678 |
| 收藏数 | 收藏次数 | 56,789 |
| 点赞率 | 点赞数/播放量 | 8.0% |
| 投币率 | 投币数/播放量 | 3.7% |
| 收藏率 | 收藏数/播放量 | 4.6% |

## 🎨 图表说明

### 二维图表

1. **播放量分析**
   - 播放量分布直方图
   - 各分区播放量箱线图
   - Top 20热门视频
   - 分区播放量占比饼图

2. **互动数据分析**
   - 播放量vs点赞数散点图
   - 互动率对比柱状图
   - 各分区互动数据对比
   - 互动指标相关性热力图

3. **UP主分析**
   - Top 15高产UP主
   - Top 15热门UP主（按播放量）
   - UP主平均播放量分布
   - UP主视频数量分布

4. **分区雷达图**
   - 各分区多维度数据对比
   - 包含播放量、点赞数、投币数、收藏数、弹幕数

5. **综合仪表盘**
   - 总体统计数据
   - 分区视频数量
   - Top 10视频对比
   - 互动率分布
   - 时长分布
   - 分区平均播放量

### 三维图表

6. **三维散点图**
   - X轴: 播放量
   - Y轴: 点赞数
   - Z轴: 投币数
   - 颜色: 收藏数

7. **三维柱状图**
   - 各分区数据三维对比
   - 同时展示播放量、点赞数、投币数

8. **三维曲面图**
   - 播放量-点赞数-投币数关系曲面
   - 使用线性回归拟合

9. **三维线框图**
   - 播放量-点赞数分布密度
   - 使用核密度估计

10. **三维综合展示**
    - 4个子图展示不同角度
    - 数据分布、分区对比、Top视频、互动率

## ⚠️ 常见问题

### Q1: 提示"爬不到数据"怎么办？

**A**: 不用担心！程序会自动切换到模拟数据模式，确保所有功能正常运行。

### Q2: 中文显示为乱码或方框？

**A**: 已在代码中修复，如果仍有问题：
```bash
# 在命令行先运行
chcp 65001
# 然后再运行脚本
```

### Q3: 提示缺少某个库？

**A**: 安装依赖：
```bash
pip install pandas matplotlib seaborn numpy requests scikit-learn scipy
```

### Q4: 想要真实数据怎么办？

**A**: 
1. 确保网络连接正常
2. 尝试使用VPN
3. 等待一段时间后重试
4. 程序会自动尝试获取真实数据

### Q5: 如何修改爬取的分区？

**A**: 编辑 `crawler.py`，修改 `categories` 列表：
```python
categories = [
    {'rid': 0, 'name': '全站'},
    {'rid': 1, 'name': '动画'},
    # 添加更多分区...
]
```

## 🎓 学习价值

通过本项目，您将学会：

1. **数据获取**
   - API调用
   - 错误处理
   - 数据备份方案

2. **数据处理**
   - 数据清洗
   - 特征工程
   - 数据转换

3. **二维可视化**
   - 直方图、箱线图、柱状图
   - 散点图、饼图
   - 热力图、雷达图
   - 综合仪表盘

4. **三维可视化**
   - 三维散点图
   - 三维柱状图
   - 三维曲面图
   - 三维线框图

5. **项目管理**
   - 模块化设计
   - 错误处理
   - 自动化流程

## 📝 项目亮点

1. ✅ **零失败**: 即使API失败也能完成所有功能
2. ✅ **一键运行**: 双击bat文件即可
3. ✅ **专业图表**: 10个高质量可视化图表
4. ✅ **完整文档**: 详细的使用说明和注释
5. ✅ **可扩展**: 代码结构清晰，易于修改

## 🎉 开始使用

现在就试试吧！

```bash
# 进入目录
cd e:\anstis\Phase4_Training\Bilibili_Analysis

# 一键运行
run_all.bat
```

几分钟后，您将获得：
- ✅ 100条视频数据
- ✅ 10个专业图表
- ✅ 1份数据分析报告

**祝您使用愉快！🎊**
